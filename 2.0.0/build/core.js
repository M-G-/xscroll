define('kg/xscroll/2.0.0/core',["./util","./event","./pan","./tap","./pinch","./scrollbar","./pulldown","./swipeedit"],function(require, exports, module) {function e(e,t){return[[(e/3+(e+t)/3-e)/(t-e),(e*e/3+e*t*2/3-e*e)/(t*t-e*e)],[(t/3+(e+t)/3-e)/(t-e),(t*t/3+e*t*2/3-e*e)/(t*t-e*e)]]}var t=window,n=require("./util"),i=require("./event"),r=require("./pan"),o=require("./tap"),a=require("./pinch"),s=require("./scrollbar"),c=require("./pulldown"),l=(require("./swipeedit"),function(e){this.userConfig=e,this.init()});l.PullDown=c,l.version="1.0.0";for(var f="scrollend",u="scroll",h="panend",d="panstart",g="pan",y="scrollanimate",_="scaleanimate",v="scale",p="afterrender",m="refresh",b=5e-4,C=300,x="ease-in-out",w=.1,S=.36,T=300,X=n.prefixStyle("transform"),Y=n.prefixStyle("transition"),E=n.prefixStyle("transitionDuration"),k=n.prefixStyle("transformOrigin"),H=n.vendor?n.prefixStyle("transitionEnd"):"transitionend",A=n.vendor?["-",n.vendor,"-transform"].join(""):"transform",N=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},O=["webkit","moz","ms","o"],P=window.cancelAnimationFrame,W=0;W<O.length;W++)(window[O[W]+"CancelAnimationFrame"]||window[O[W]+"CancelRequestAnimationFrame"])&&(P=window[O[W]+"CancelAnimationFrame"]||window[O[W]+"CancelRequestAnimationFrame"]);P=P||window.clearTimeout;var B=function(e,t){if(!(e.touches.length>1)){var n=e.changedTouches,i=n[0],r=document.createEvent("MouseEvent");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}};n.mix(l.prototype,{init:function(){var e=this;e.__events={};var t=e.userConfig=n.mix({scalable:!1,scrollbarX:!0,scrollbarY:!0,gpuAcceleration:!0},e.userConfig,void 0,void 0,!0);e.renderTo=t.renderTo.nodeType?t.renderTo:document.querySelector(t.renderTo),e.scale=t.scale||1,e.boundryCheckEnabled=!0;var i=e.clsPrefix=t.clsPrefix||"xs-";e.SROLL_ACCELERATION=t.SROLL_ACCELERATION||b,e.containerClsName=i+"container",e.contentClsName=i+"content"},refresh:function(){var e=this;e.render(),e.scrollTo({x:0,y:0}),e.fire(m)},render:function(){var e=this,t=e.userConfig;e._createContainer();var n=t.width||e.renderTo.offsetWidth,i=t.height||e.renderTo.offsetHeight||0;e.width=n,e.height=i;var r=t.containerWidth||e.content.offsetWidth,o=t.containerHeight||e.content.offsetHeight;e.containerWidth=r<e.width?e.width:r,e.containerHeight=o<e.height?e.height:o,e.initialContainerWidth=e.containerWidth,e.initialContainerHeight=e.containerHeight;var a=e.userConfig.minScale||Math.max(e.width/e.containerWidth,e.height/e.containerHeight),s=e.userConfig.maxScale||1;e.minScale=a,e.maxScale=s,e.boundry={reset:function(){return this.resetTop(),this.resetLeft(),this.resetBottom(),this.resetRight(),this},resetTop:function(){return this.top=0,this},resetLeft:function(){return this.left=0,this},resetBottom:function(){return this.bottom=e.height,this},resetRight:function(){return this.right=e.width,this},expandTop:function(e){return this.top+=e||0,this},expandLeft:function(e){return this.left+=e||0,this},expandRight:function(e){return this.right-=e||0,this},expandBottom:function(e){return this.bottom-=e||0,this}},e.boundry.reset(),e.fire(p),e.renderScrollBars(),e._bindEvt()},renderScrollBars:function(){var e=this;e.userConfig.scrollbarX&&(e.scrollbarX?e.scrollbarX._update():e.scrollbarX=new s({xscroll:e,type:"x"})),e.userConfig.scrollbarY&&(e.scrollbarY?e.scrollbarY._update():e.scrollbarY=new s({xscroll:e,type:"y"}))},_createContainer:function(){var e=this;if(!e.__isContainerCreated){var t=(e.renderTo,e.container=e.renderTo.getElementsByClassName(e.containerClsName)[0]),n=e.content=e.renderTo.getElementsByClassName(e.contentClsName)[0];t.style.position="absolute",t.style.height="100%",t.style.width="100%",t.style[k]="0 0",n.style.position="absolute",n.style[k]="0 0",e.translate({x:0,y:0}),e.__isContainerCreated=!0}},translate:function(e){this.translateX(e.x),this.translateY(e.y)},_scale:function(e,t,n,i){var r=this;if(r.userConfig.scalable&&r.scale!=e&&e){r.isScaling||(r.scaleBegin=r.scale,r.isScaling=!0,r.scaleBeginX=r.x,r.scaleBeginY=r.y),t&&(r.originX=t),n&&(r.originY=n);var o=r.boundry,a=e*r.initialContainerWidth,s=e*r.initialContainerHeight;r.containerWidth=Math.round(a>r.width?a:r.width),r.containerHeight=Math.round(s>r.height?s:r.height),r.scale=e;var c=t*(r.initialContainerWidth*r.scaleBegin-r.containerWidth)+r.scaleBeginX,l=n*(r.initialContainerHeight*r.scaleBegin-r.containerHeight)+r.scaleBeginY;c>o.left&&(c=o.left),l>o.top&&(l=o.top),c<o.right-r.containerWidth&&(c=o.right-r.containerWidth),l<o.bottom-r.containerHeight&&(l=o.bottom-r.containerHeight),r.x=c,r.y=l,r._transform(),r.fire(v,{scale:e,origin:{x:t,y:n},triggerEvent:i})}},scaleTo:function(e,t,n,i,r){var o=this;if(o.userConfig.scalable&&o.scale!=e&&e){var i=i||1,r=r||"ease-out",a=[A," ",i/1e3,"s ",r," 0s"].join(""),s=Date.now();o.destTimeScale=s+i,P(o._rafScale);var c=(o.scale,function(){var e=Date.now();return e>s+i&&e>=o.destTimeScale?void(o.isScaling=!1):void(o._rafScale=N(c))});c(),o.container.style[Y]=a,o.content.style[Y]=a,o._scale(e,t,n,"scaleTo"),o.fire(_,{scale:o.scale,duration:i,easing:r,offset:{x:o.x,y:o.y},origin:{x:t,y:n}})}},translateX:function(e){this.x=e,this._transform()},translateY:function(e){this.y=e,this._transform()},_noTransition:function(){var e=this;n.isBadAndroid?(e.content.style[E]="0.001s",e.container.style[E]="0.001s"):(e.content.style[Y]="none",e.container.style[Y]="none")},stop:function(){var e=this;if(!e.isScaling){var t=e.boundry,n=e.getOffset();n.y>t.top||n.y+e.containerHeight<t.bottom||n.x>t.left||n.x+e.containerWidth<t.right||(e.translate(n),e._noTransition(),P(e.rafX),P(e.rafY),e.fire(f,{offset:n,scale:e.scale,zoomType:"xy"}))}},enableGPUAcceleration:function(){this.userConfig.gpuAcceleration=!0},disableGPUAcceleration:function(){this.userConfig.gpuAcceleration=!1},_transform:function(){var e=this.userConfig.gpuAcceleration?" translateZ(0) ":"";this.content.style[X]="translate("+this.x+"px,0px)  scaleX("+this.scale+") scaleY("+this.scale+") "+e,this.container.style[X]="translate(0px,"+this.y+"px) "+e},getOffset:function(){var e=this;return{x:e.getOffsetLeft(),y:e.getOffsetTop()}},getOffsetTop:function(){if(this.lockY)return 0;var e=window.getComputedStyle(this.container)[X].match(/[-\d\.*\d*]+/g);return e?Math.round(e[5]):0},getOffsetLeft:function(){if(this.lockX)return 0;var e=window.getComputedStyle(this.content)[X].match(/[-\d\.*\d*]+/g);return e?Math.round(e[4]):0},scrollTo:function(e,t,n,i){var r=this,o=r.getOffset(),a=void 0===e.x||isNaN(e.x)?-o.x:e.x,s=void 0===e.y||isNaN(e.y)?-o.y:e.y;r.scrollX(a,t,n,i),r.scrollY(s,t,n,i)},scrollX:function(e,t,n,i){var r=this,e=Math.round(e);if(!r.userConfig.lockX){var t=t||0,n=n||"cubic-bezier(0.333333, 0.666667, 0.666667, 1)",o=r.content;r.translateX(-e);var a=t>0?[A," ",t/1e3,"s ",n," 0s"].join(""):"none";return o.style[Y]=a,r._scrollHandler(-e,t,i,n,a,"x"),o.style[Y]=a}},scrollY:function(e,t,n,i){var r=this,e=Math.round(e);if(!r.userConfig.lockY){var t=t||0,n=n||"cubic-bezier(0.333333, 0.666667, 0.666667, 1)",o=r.container;r.translateY(-e);var a=t>0?[A," ",t/1e3,"s ",n," 0s"].join(""):"none";return o.style[Y]=a,r._scrollHandler(-e,t,i,n,a,"y"),o.style[Y]=a}},_scrollHandler:function(e,t,n,i,r,o){var a=this,s=a.getOffset();if(0>=t)return a.fire(u,{zoomType:o,offset:s}),void a.fire(f,{zoomType:o,offset:s});var c=o.toUpperCase();a["isScrolling"+c]=!0;var l=Date.now();a["destTime"+c]=l+t,P(a["raf"+c]),a["__scrollEndCallback"+c]=function(e){a["isScrolling"+c]=!1,a.fire(f,{offset:a.getOffset(),zoomType:e.type}),n&&n(e)};var h=function(){Date.now();a["isScrolling"+c]&&N(function(){a.fire(u,{zoomType:o,offset:a.getOffset()})},0),a["raf"+c]=N(h)};h(),a.fire(y,{transition:r,offset:{x:a.x,y:a.y},duration:t/1e3,easing:i,zoomType:o})},boundryCheckX:function(e){var t=this;if(t.boundryCheckEnabled&&!t.userConfig.lockX){var n=t.getOffset(),i=t.containerWidth,r=t.boundry;n.x>r.left?(n.x=r.left,t.scrollX(-n.x,C,x,e)):n.x+i<r.right&&(n.x=r.right-i,t.scrollX(-n.x,C,x,e))}},boundryCheckY:function(e){var t=this;if(t.boundryCheckEnabled&&!t.userConfig.lockY){var n=t.getOffset(),i=t.containerHeight,r=t.boundry;n.y>r.top?(n.y=r.top,t.scrollY(-n.y,C,x,e)):n.y+i<r.bottom&&(n.y=r.bottom-i,t.scrollY(-n.y,C,x,e))}},boundryCheck:function(e){this.boundryCheckX(e),this.boundryCheckY(e)},bounce:function(e,t){this.boundryCheckEnabled=e,e?this.boundryCheck(t):void 0},_fireTouchStart:function(e){this.fire("touchstart",e)},_firePanStart:function(e){this.fire(d,e)},_firePan:function(e){this.fire(g,e)},_firePanEnd:function(e){this.fire(h,e)},_fireClick:function(e,t){this.fire(e,t)},_bindEvt:function(){var e=this;if(!e.__isEvtBind){e.__isEvtBind=!0;var s=e.renderTo,c=e.container,l=e.content,f=e.containerWidth,h=e.containerHeight,d={x:0,y:0},g=e.boundry;if(i.on(s,"touchstart",function(t){t.preventDefault(),e._fireTouchStart(t),e.stop()}).on(s,o.TAP,function(t){e.boundryCheck(),e.isScrollingX||e.isScrollingY?(e.isScrollingX=!1,e.isScrollingY=!1,e.stop()):(B(t,"click"),e._fireClick("click",t))}).on(s,r.PAN_START,function(t){d=e.getOffset(),e.translate(d),e._firePanStart(n.mix(t,{offset:d}))}).on(s,r.PAN,function(t){var i=e.userConfig.lockY?Number(d.y):Number(d.y)+t.deltaY,r=e.userConfig.lockX?Number(d.x):Number(d.x)+t.deltaX;f=e.containerWidth,h=e.containerHeight,i>g.top&&(i=(i-g.top)*S+g.top),i<g.bottom-h&&(i+=(g.bottom-h-i)*S),r>g.left&&(r=(r-g.left)*S+g.left),r<g.right-f&&(r+=(g.right-f-r)*S),e.translate({x:r,y:i}),e._noTransition(),e.isScrollingX=!1,e.isScrollingY=!1,e.directionX=t.directionX,e.directionY=t.directionY;var o=n.mix(t,{offset:{x:r,y:i},directionX:e.directionX,directionY:e.directionY});e.fire(u,o),e._firePan(o)}).on(s,r.PAN_END,function(t){e.panEndHandler(t),e._firePanEnd(t)}),i.on(c,H,function(t){t.target!=l||e.isScaling||e.__scrollEndCallbackX&&e.__scrollEndCallbackX({type:"x"}),t.target!=c||e.isScaling||e.__scrollEndCallbackY&&e.__scrollEndCallbackY({type:"y"})},!1),e.userConfig.scalable){var y,_;i.on(s,a.PINCH_START,function(t){scale=e.scale,y=(t.origin.pageX-e.x)/e.containerWidth,_=(t.origin.pageY-e.y)/e.containerHeight}),i.on(s,a.PINCH,function(t){e._scale(scale*t.scale,y,_,"pinch")}),i.on(s,a.PINCH_END,function(){e.isScaling=!1,e.scale<e.minScale?e.scaleTo(e.minScale,y,_,T):e.scale>e.maxScale&&e.scaleTo(e.maxScale,y,_,T)}),i.on(s,o.DOUBLE_TAP,function(t){y=(t.pageX-e.x)/e.containerWidth,_=(t.pageY-e.y)/e.containerHeight,e.scale>e.minScale?e.scaleTo(e.minScale,y,_,200):e.scaleTo(e.maxScale,y,_,200)})}i.on(t,"resize",function(){e.refresh()})}},panEndHandler:function(e){var t,n=this,i=(n.userConfig,n.getOffset()),r=n._bounce("x",i.x,e.velocityX,n.width,n.containerWidth),o=n._bounce("y",i.y,e.velocityY,n.height,n.containerHeight),a=r?r.offset:0,s=o?o.offset:0;r&&o&&r.status&&o.status&&r.duration&&o.duration&&(t=Math.max(r.duration,o.duration)),r&&(r.duration<100?n._scrollEndHandler("x"):n.scrollX(a,t||r.duration,r.easing,function(){n._scrollEndHandler("x")})),o&&(o.duration<100?n._scrollEndHandler("y"):n.scrollY(s,t||o.duration,o.easing,function(){n._scrollEndHandler("y")})),n.directionX=e.velocityX<0?"left":"right",n.directionY=e.velocityY<0?"up":"down"},_scrollEndHandler:function(t){var n=this,i=t.toUpperCase(),r="scroll"+i,o="boundryCheck"+i,a="_bounce"+t;if(n[a]){n.fire("outOfBoundry");var s=n[a],c=.04*(s/Math.abs(s)),l=s/c,f=n.getOffset()[t],u=f+l*s/2;n[r](-u,l,"cubic-bezier("+e(-l,0)+")",function(){n[a]=0,n[o]()})}else n[o]()},fire:function(e){var t=this;if(t.__events[e]&&t.__events[e].length)for(var n in t.__events[e])t.__events[e][n].apply(this,[].slice.call(arguments,1))},on:function(e,t){this.__events[e]||(this.__events[e]=[]),this.__events[e].push(t)},detach:function(e,t){if(e&&this.__events[e]){var n=this.__events[e].indexOf(t);n>-1&&this.__events[e].splice(n,1)}},_bounce:function(t,n,i,r,o){var a=this,s=a.boundry,c="x"==t?s.left:s.top,l="x"==t?s.right:s.bottom,r=l-c,f={};if(0===i)return void("x"==t?a.boundryCheckX():a.boundryCheckY());if(!("x"==t&&a.userConfig.lockX||"y"==t&&a.userConfig.lockY)){var u=a.userConfig,h=u.maxSpeed>0&&u.maxSpeed<6?u.maxSpeed:3;if(i>h&&(i=h),-h>i&&(i=-h),n>c||r-o>n){var d=w*(i/Math.abs(i)),g=i/d,y=n+g*i/2;return f.offset=-y,f.duration=g,f.easing="cubic-bezier("+e(-g,0)+")",f}var d=a.SROLL_ACCELERATION*(i/Math.abs(i)),g=i/d,y=n/1+g*i/2;if(y>c){var _=c-n,v=(i-Math.sqrt(-2*d*_+i*i))/d;f.offset=-c,f.duration=v,f.easing="cubic-bezier("+e(-g,-g+v)+")",a["_bounce"+t]=i-d*v}else if(r-o>y){var _=r-o-n,v=(i+Math.sqrt(-2*d*_+i*i))/d;f.offset=o-r,f.duration=v,f.easing="cubic-bezier("+e(-g,-g+v)+")",a["_bounce"+t]=i-d*v}else f.offset=-y,f.duration=g,f.easing="cubic-bezier("+e(-g,0)+")",f.status="normal";return a["isScrolling"+t.toUpperCase()]=!0,f}},plug:function(e){var t=this;e&&e.pluginId&&(t.__plugins||(t.__plugins=[]),e.initializer(t),t.__plugins.push(e))},unplug:function(e){var t=this;if(e){var n="string"==typeof e?t.getPlugin(e):e;for(var i in t.__plugins)if(t.__plugins[i]==n)return t.__plugins[i].splice(i,1)}},getPlugin:function(e){var t=this,n=[];for(var i in t.__plugins)t.__plugins[i]&&t.__plugins[i].pluginId==e&&n.push(t.__plugins[i]);return n.length>1?n:n[0]||null}}),window.XScroll=l;});