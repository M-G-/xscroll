KISSY.add('kg/xscroll/2.0.0/scrollbar',["./util"],function(S ,require, exports, module) {define(function(t){var e=t("./util"),i=60,r=5,o=e.prefixStyle("transform"),s=(e.vendor?["-",e.vendor,"-transform"].join(""):"transform",e.prefixStyle("transition")),a=(e.prefixStyle("borderRadius"),[]),n=function(t){this.userConfig=t,this.init(t.xscroll)};return e.mix(n.prototype,{init:function(t){var e=this;e.xscroll=t,e.type=e.userConfig.type,e.isY="y"==e.type?!0:!1,e.containerSize=e.isY?e.xscroll.containerHeight:e.xscroll.containerWidth,e.indicateSize=e.isY?e.xscroll.height:e.xscroll.width,e.offset=e.xscroll.getOffset(),e.render(),e._bindEvt()},destroy:function(){var t=this;t.scrollbar&&t.scrollbar.remove(),t.xscroll.detach("scaleanimate",t._update,t),t.xscroll.detach("scrollend",t._update,t),t.xscroll.detach("scrollanimate",t._update,t);for(var e in a)t.xscroll.detach(a[e],t._update,t);delete t},render:function(){var t=this;if(!t.__isRender){t.__isRender=!0;var e=t.xscroll,i=t.isY?"width: 3px;position:absolute;bottom:5px;top:5px;right:2px;z-index:999;overflow:hidden;-webkit-border-radius:2px;-moz-border-radius:2px;-o-border-radius:2px;":"height:3px;position:absolute;left:5px;right:5px;bottom:2px;z-index:999;overflow:hidden;-webkit-border-radius:2px;-moz-border-radius:2px;-o-border-radius:2px;";t.scrollbar=document.createElement("div"),t.scrollbar.style.cssText=i,e.renderTo.appendChild(t.scrollbar);var r=t.isY?"width:100%;":"height:100%;";t.indicate=document.createElement("div"),t.indicate.style.cssText=r+"position:absolute;background:rgba(0,0,0,0.3);-webkit-border-radius:1.5px;-moz-border-radius:1.5px;-o-border-radius:1.5px;",t.scrollbar.appendChild(t.indicate),t._update()}},_update:function(t,e,i){var r=this,t=t||r.xscroll.getOffset(),o=r.computeScrollBar(t),s=r.isY?"height":"width";r.indicate.style[s]=o.size+"px",e&&i?r.scrollTo(o.offset,e,i):r.moveTo(o.offset)},computeScrollBar:function(t){var e=this,o=e.isY?"y":"x",t=t&&-t[o];e.containerSize=e.isY?e.xscroll.containerHeight:e.xscroll.containerWidth,e.indicateSize=e.isY?e.xscroll.height:e.xscroll.width;var s=e.indicateSize,a=e.containerSize,n=t/a,l=s*n,c=s*s/a,d=l*(s-i+c)/s;if(i>c&&(c=i,l=d),0>l)l=Math.abs(t)*c/i>c-r?r-c:t*c/i;else if(l+c>s){var f=t-a+s;l=f*c/i>c-r?s-r:s-c+f*c/i}e.barOffset=l;var p={size:c},f={};return f[o]=l,p.offset=f,p},scrollTo:function(t,e,i){var r=this;r.indicate.style[o]=r.isY?"translateY("+t.y+"px) translateZ(0)":"translateX("+t.x+"px)  translateZ(0)",r.indicate.style[s]=["all ",e,"s ",i," 0"].join("")},moveTo:function(t){var e=this;e.show(),e.indicate.style[o]=e.isY?"translateY("+t.y+"px)  translateZ(0)":"translateX("+t.x+"px)  translateZ(0)",e.indicate.style[s]=""},_bindEvt:function(){var t=this;if(!t.__isEvtBind){t.__isEvtBind=!0;var e=t.isY?"y":"x";t.xscroll.on("scaleanimate",function(e){t._update(e.offset)}),t.xscroll.on("pan",function(e){t._update(e.offset)}),t.xscroll.on("scrollend",function(i){i.zoomType.indexOf(e)>-1&&t._update(i.offset)}),t.xscroll.on("scrollanimate",function(i){i.zoomType==e&&t._update(i.offset,i.duration,i.easing)})}},reset:function(){var t=this;t.offset={x:0,y:0},t._update()},hide:function(){var t=this;t.scrollbar.style.opacity=0,t.scrollbar.style[s]="opacity 0.3s ease-out"},show:function(){var t=this;t.scrollbar.style.opacity=1}}),n});});