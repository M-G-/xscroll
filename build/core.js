define('kg/xscroll/2.0.0/core',["./util","./event","./pan","./tap","./pinch","./scrollbar","./pulldown","./swipeedit"],function(require, exports, module) {function e(e,t){return[[(e/3+(e+t)/3-e)/(t-e),(e*e/3+e*t*2/3-e*e)/(t*t-e*e)],[(t/3+(e+t)/3-e)/(t-e),(t*t/3+e*t*2/3-e*e)/(t*t-e*e)]]}var t=require("./util"),n=require("./event"),i=require("./pan"),r=require("./tap"),o=require("./pinch"),a=require("./scrollbar"),s=require("./pulldown"),c=(require("./swipeedit"),function(e){this.userConfig=e,this.init()});c.PullDown=s,c.version="2.0.0";for(var l="scrollend",f="scroll",u="panend",h="panstart",d="pan",g="scrollanimate",y="scaleanimate",_="scale",p="afterrender",v="refresh",m=5e-4,b=300,C="ease-in-out",x=.1,w=.36,S=300,T=t.prefixStyle("transform"),X=t.prefixStyle("transition"),Y=t.prefixStyle("transitionDuration"),E=t.prefixStyle("transformOrigin"),k=t.vendor?t.prefixStyle("transitionEnd"):"transitionend",H=t.vendor?["-",t.vendor,"-transform"].join(""):"transform",A=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},N=["webkit","moz","ms","o"],O=window.cancelAnimationFrame,P=0;P<N.length;P++)(window[N[P]+"CancelAnimationFrame"]||window[N[P]+"CancelRequestAnimationFrame"])&&(O=window[N[P]+"CancelAnimationFrame"]||window[N[P]+"CancelRequestAnimationFrame"]);O=O||window.clearTimeout;var W=function(e,t){if(!(e.touches.length>1)){var n=e.changedTouches,i=n[0],r=document.createEvent("MouseEvent");r.initMouseEvent(t,!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(r)}};t.mix(c.prototype,{init:function(){var e=this;e.__events={};var n=e.userConfig=t.mix({scalable:!1,scrollbarX:!0,scrollbarY:!0,gpuAcceleration:!0},e.userConfig,void 0,void 0,!0);e.renderTo=n.renderTo.nodeType?n.renderTo:document.querySelector(n.renderTo),e.scale=n.scale||1,e.boundryCheckEnabled=!0;var i=e.clsPrefix=n.clsPrefix||"xs-";e.SROLL_ACCELERATION=n.SROLL_ACCELERATION||m,e.containerClsName=i+"container",e.contentClsName=i+"content"},refresh:function(){var e=this;e.render(),e.scrollTo({x:0,y:0}),e.fire(v)},render:function(){var e=this,t=e.userConfig;e._createContainer();var n=t.width||e.renderTo.offsetWidth,i=t.height||e.renderTo.offsetHeight||0;e.width=n,e.height=i;var r=t.containerWidth||e.content.offsetWidth,o=t.containerHeight||e.content.offsetHeight;e.containerWidth=r<e.width?e.width:r,e.containerHeight=o<e.height?e.height:o,e.initialContainerWidth=e.containerWidth,e.initialContainerHeight=e.containerHeight;var a=e.userConfig.minScale||Math.max(e.width/e.containerWidth,e.height/e.containerHeight),s=e.userConfig.maxScale||1;e.minScale=a,e.maxScale=s,e.boundry={reset:function(){return this.resetTop(),this.resetLeft(),this.resetBottom(),this.resetRight(),this},resetTop:function(){return this.top=0,this},resetLeft:function(){return this.left=0,this},resetBottom:function(){return this.bottom=e.height,this},resetRight:function(){return this.right=e.width,this},expandTop:function(e){return this.top+=e||0,this},expandLeft:function(e){return this.left+=e||0,this},expandRight:function(e){return this.right-=e||0,this},expandBottom:function(e){return this.bottom-=e||0,this}},e.boundry.reset(),e.fire(p),e.renderScrollBars(),e._bindEvt()},renderScrollBars:function(){var e=this;e.userConfig.scrollbarX&&(e.scrollbarX?e.scrollbarX._update():e.scrollbarX=new a({xscroll:e,type:"x"})),e.userConfig.scrollbarY&&(e.scrollbarY?e.scrollbarY._update():e.scrollbarY=new a({xscroll:e,type:"y"}))},_createContainer:function(){var e=this;if(!e.__isContainerCreated){var t=(e.renderTo,e.container=e.renderTo.getElementsByClassName(e.containerClsName)[0]),n=e.content=e.renderTo.getElementsByClassName(e.contentClsName)[0];t.style.position="absolute",t.style.height="100%",t.style.width="100%",t.style[E]="0 0",n.style.position="absolute",n.style[E]="0 0",e.translate({x:0,y:0}),e.__isContainerCreated=!0}},translate:function(e){this.translateX(e.x),this.translateY(e.y)},_scale:function(e,t,n,i){var r=this;if(r.userConfig.scalable&&r.scale!=e&&e){r.isScaling||(r.scaleBegin=r.scale,r.isScaling=!0,r.scaleBeginX=r.x,r.scaleBeginY=r.y),t&&(r.originX=t),n&&(r.originY=n);var o=r.boundry,a=e*r.initialContainerWidth,s=e*r.initialContainerHeight;r.containerWidth=Math.round(a>r.width?a:r.width),r.containerHeight=Math.round(s>r.height?s:r.height),r.scale=e;var c=t*(r.initialContainerWidth*r.scaleBegin-r.containerWidth)+r.scaleBeginX,l=n*(r.initialContainerHeight*r.scaleBegin-r.containerHeight)+r.scaleBeginY;c>o.left&&(c=o.left),l>o.top&&(l=o.top),c<o.right-r.containerWidth&&(c=o.right-r.containerWidth),l<o.bottom-r.containerHeight&&(l=o.bottom-r.containerHeight),r.x=c,r.y=l,r._transform(),r.fire(_,{scale:e,origin:{x:t,y:n},triggerEvent:i})}},scaleTo:function(e,t,n,i,r){var o=this;if(o.userConfig.scalable&&o.scale!=e&&e){var i=i||1,r=r||"ease-out",a=[H," ",i/1e3,"s ",r," 0s"].join(""),s=Date.now();o.destTimeScale=s+i,O(o._rafScale);var c=(o.scale,function(){var e=Date.now();return e>s+i&&e>=o.destTimeScale?void(o.isScaling=!1):void(o._rafScale=A(c))});c(),o.container.style[X]=a,o.content.style[X]=a,o._scale(e,t,n,"scaleTo"),o.fire(y,{scale:o.scale,duration:i,easing:r,offset:{x:o.x,y:o.y},origin:{x:t,y:n}})}},translateX:function(e){this.x=e,this._transform()},translateY:function(e){this.y=e,this._transform()},_noTransition:function(){var e=this;t.isBadAndroid?(e.content.style[Y]="0.001s",e.container.style[Y]="0.001s"):(e.content.style[X]="none",e.container.style[X]="none")},stop:function(){var e=this;if(!e.isScaling){var t=e.boundry,n=e.getOffset();n.y>t.top||n.y+e.containerHeight<t.bottom||n.x>t.left||n.x+e.containerWidth<t.right||(e.translate(n),e._noTransition(),O(e.rafX),O(e.rafY),e.fire(l,{offset:n,scale:e.scale,zoomType:"xy"}))}},enableGPUAcceleration:function(){this.userConfig.gpuAcceleration=!0},disableGPUAcceleration:function(){this.userConfig.gpuAcceleration=!1},_transform:function(){var e=this.userConfig.gpuAcceleration?" translateZ(0) ":"";this.content.style[T]="translate("+this.x+"px,0px)  scaleX("+this.scale+") scaleY("+this.scale+") "+e,this.container.style[T]="translate(0px,"+this.y+"px) "+e},getOffset:function(){var e=this;return{x:e.getOffsetLeft(),y:e.getOffsetTop()}},getOffsetTop:function(){if(this.lockY)return 0;var e=window.getComputedStyle(this.container)[T].match(/[-\d\.*\d*]+/g);return e?Math.round(e[5]):0},getOffsetLeft:function(){if(this.lockX)return 0;var e=window.getComputedStyle(this.content)[T].match(/[-\d\.*\d*]+/g);return e?Math.round(e[4]):0},scrollTo:function(e,t,n,i){var r=this,o=r.getOffset(),a=void 0===e.x||isNaN(e.x)?-o.x:e.x,s=void 0===e.y||isNaN(e.y)?-o.y:e.y;r.scrollX(a,t,n,i),r.scrollY(s,t,n,i)},scrollX:function(e,t,n,i){var r=this,e=Math.round(e);if(!r.userConfig.lockX){var t=t||0,n=n||"cubic-bezier(0.333333, 0.666667, 0.666667, 1)",o=r.content;r.translateX(-e);var a=t>0?[H," ",t/1e3,"s ",n," 0s"].join(""):"none";return o.style[X]=a,r._scrollHandler(-e,t,i,n,a,"x"),o.style[X]=a}},scrollY:function(e,t,n,i){var r=this,e=Math.round(e);if(!r.userConfig.lockY){var t=t||0,n=n||"cubic-bezier(0.333333, 0.666667, 0.666667, 1)",o=r.container;r.translateY(-e);var a=t>0?[H," ",t/1e3,"s ",n," 0s"].join(""):"none";return o.style[X]=a,r._scrollHandler(-e,t,i,n,a,"y"),o.style[X]=a}},_scrollHandler:function(e,t,n,i,r,o){var a=this,s=a.getOffset();if(0>=t)return a.fire(f,{zoomType:o,offset:s}),void a.fire(l,{zoomType:o,offset:s});var c=o.toUpperCase();a["isScrolling"+c]=!0;var u=Date.now();a["destTime"+c]=u+t,O(a["raf"+c]),a["__scrollEndCallback"+c]=function(e){a["isScrolling"+c]=!1,a.fire(l,{offset:a.getOffset(),zoomType:e.type}),n&&n(e)};var h=function(){Date.now();a["isScrolling"+c]&&A(function(){a.fire(f,{zoomType:o,offset:a.getOffset()})},0),a["raf"+c]=A(h)};h(),a.fire(g,{transition:r,offset:{x:a.x,y:a.y},duration:t/1e3,easing:i,zoomType:o})},boundryCheckX:function(e){var t=this;if(t.boundryCheckEnabled&&!t.userConfig.lockX){var n=t.getOffset(),i=t.containerWidth,r=t.boundry;n.x>r.left?(n.x=r.left,t.scrollX(-n.x,b,C,e)):n.x+i<r.right&&(n.x=r.right-i,t.scrollX(-n.x,b,C,e))}},boundryCheckY:function(e){var t=this;if(t.boundryCheckEnabled&&!t.userConfig.lockY){var n=t.getOffset(),i=t.containerHeight,r=t.boundry;n.y>r.top?(n.y=r.top,t.scrollY(-n.y,b,C,e)):n.y+i<r.bottom&&(n.y=r.bottom-i,t.scrollY(-n.y,b,C,e))}},boundryCheck:function(e){this.boundryCheckX(e),this.boundryCheckY(e)},bounce:function(e,t){this.boundryCheckEnabled=e,e?this.boundryCheck(t):void 0},_fireTouchStart:function(e){this.fire("touchstart",e)},_firePanStart:function(e){this.fire(h,e)},_firePan:function(e){this.fire(d,e)},_firePanEnd:function(e){this.fire(u,e)},_fireClick:function(e,t){this.fire(e,t)},_bindEvt:function(){var e=this;if(!e.__isEvtBind){e.__isEvtBind=!0;var a=e.renderTo,s=e.container,c=e.content,l=e.containerWidth,u=e.containerHeight,h={x:0,y:0},d=e.boundry;if(n.on(a,"touchstart",function(t){t.preventDefault(),e._fireTouchStart(t),e.stop()}).on(a,r.TAP,function(t){e.boundryCheck(),e.isScrollingX||e.isScrollingY?(e.isScrollingX=!1,e.isScrollingY=!1,e.stop()):(W(t,"click"),e._fireClick("click",t))}).on(a,i.PAN_START,function(n){h=e.getOffset(),e.translate(h),e._firePanStart(t.mix(n,{offset:h}))}).on(a,i.PAN,function(n){var i=e.userConfig.lockY?Number(h.y):Number(h.y)+n.deltaY,r=e.userConfig.lockX?Number(h.x):Number(h.x)+n.deltaX;l=e.containerWidth,u=e.containerHeight,i>d.top&&(i=(i-d.top)*w+d.top),i<d.bottom-u&&(i+=(d.bottom-u-i)*w),r>d.left&&(r=(r-d.left)*w+d.left),r<d.right-l&&(r+=(d.right-l-r)*w),e.translate({x:r,y:i}),e._noTransition(),e.isScrollingX=!1,e.isScrollingY=!1,e.directionX=n.directionX,e.directionY=n.directionY;var o=t.mix(n,{offset:{x:r,y:i},directionX:e.directionX,directionY:e.directionY});e.fire(f,o),e._firePan(o)}).on(a,i.PAN_END,function(t){e.panEndHandler(t),e._firePanEnd(t)}),n.on(s,k,function(t){t.target!=c||e.isScaling||e.__scrollEndCallbackX&&e.__scrollEndCallbackX({type:"x"}),t.target!=s||e.isScaling||e.__scrollEndCallbackY&&e.__scrollEndCallbackY({type:"y"})},!1),e.userConfig.scalable){var g,y;n.on(a,o.PINCH_START,function(t){scale=e.scale,g=(t.origin.pageX-e.x)/e.containerWidth,y=(t.origin.pageY-e.y)/e.containerHeight}),n.on(a,o.PINCH,function(t){e._scale(scale*t.scale,g,y,"pinch")}),n.on(a,o.PINCH_END,function(){e.isScaling=!1,e.scale<e.minScale?e.scaleTo(e.minScale,g,y,S):e.scale>e.maxScale&&e.scaleTo(e.maxScale,g,y,S)}),n.on(a,r.DOUBLE_TAP,function(t){g=(t.pageX-e.x)/e.containerWidth,y=(t.pageY-e.y)/e.containerHeight,e.scale>e.minScale?e.scaleTo(e.minScale,g,y,200):e.scaleTo(e.maxScale,g,y,200)})}n.on(window,"resize",function(){e.refresh()})}},panEndHandler:function(e){var t,n=this,i=(n.userConfig,n.getOffset()),r=n._bounce("x",i.x,e.velocityX,n.width,n.containerWidth),o=n._bounce("y",i.y,e.velocityY,n.height,n.containerHeight),a=r?r.offset:0,s=o?o.offset:0;r&&o&&r.status&&o.status&&r.duration&&o.duration&&(t=Math.max(r.duration,o.duration)),r&&n.scrollX(a,t||r.duration,r.easing,function(){n._scrollEndHandler("x")}),o&&n.scrollY(s,t||o.duration,o.easing,function(){n._scrollEndHandler("y")}),n.directionX=e.velocityX<0?"left":"right",n.directionY=e.velocityY<0?"up":"down"},_scrollEndHandler:function(t){var n=this,i=t.toUpperCase(),r="scroll"+i,o="boundryCheck"+i,a="_bounce"+t;if(n[a]){n.fire("outOfBoundry");var s=n[a],c=.04*(s/Math.abs(s)),l=s/c,f=n.getOffset()[t],u=f+l*s/2;n[r](-u,l,"cubic-bezier("+e(-l,0)+")",function(){n[a]=0,n[o]()})}else n[o]()},fire:function(e){var t=this;if(t.__events[e]&&t.__events[e].length)for(var n in t.__events[e])t.__events[e][n].apply(this,[].slice.call(arguments,1))},on:function(e,t){this.__events[e]||(this.__events[e]=[]),this.__events[e].push(t)},detach:function(e,t){if(e&&this.__events[e]){var n=this.__events[e].indexOf(t);n>-1&&this.__events[e].splice(n,1)}},_bounce:function(t,n,i,r,o){var a=this,s=a.boundry,c="x"==t?s.left:s.top,l="x"==t?s.right:s.bottom,r=l-c,f={};if(0===i)return void("x"==t?a.boundryCheckX():a.boundryCheckY());if(!("x"==t&&a.userConfig.lockX||"y"==t&&a.userConfig.lockY)){var u=a.userConfig,h=u.maxSpeed>0&&u.maxSpeed<6?u.maxSpeed:3;if(i>h&&(i=h),-h>i&&(i=-h),n>c||r-o>n){var d=x*(i/Math.abs(i)),g=i/d,y=n+g*i/2;return f.offset=-y,f.duration=g,f.easing="cubic-bezier("+e(-g,0)+")",f}var d=a.SROLL_ACCELERATION*(i/Math.abs(i)),g=i/d,y=n/1+g*i/2;if(y>c){var _=c-n,p=(i-Math.sqrt(-2*d*_+i*i))/d;f.offset=-c,f.duration=p,f.easing="cubic-bezier("+e(-g,-g+p)+")",a["_bounce"+t]=i-d*p}else if(r-o>y){var _=r-o-n,p=(i+Math.sqrt(-2*d*_+i*i))/d;f.offset=o-r,f.duration=p,f.easing="cubic-bezier("+e(-g,-g+p)+")",a["_bounce"+t]=i-d*p}else f.offset=-y,f.duration=g,f.easing="cubic-bezier("+e(-g,0)+")",f.status="normal";return a["isScrolling"+t.toUpperCase()]=!0,f}},plug:function(e){var t=this;e&&e.pluginId&&(t.__plugins||(t.__plugins=[]),e.initializer(t),t.__plugins.push(e))},unplug:function(e){var t=this;if(e){var n="string"==typeof e?t.getPlugin(e):e;for(var i in t.__plugins)if(t.__plugins[i]==n)return t.__plugins[i].splice(i,1)}},getPlugin:function(e){var t=this,n=[];for(var i in t.__plugins)t.__plugins[i]&&t.__plugins[i].pluginId==e&&n.push(t.__plugins[i]);return n.length>1?n:n[0]||null}}),window.XScroll=c,module.exports=c;});